#!/usr/bin/env sh

echo "Ì∫Ä Husky Pre-Push: Force version bump"

# Get current branch
branch=$(git rev-parse --abbrev-ref HEAD)
echo "Current branch: $branch"

# Bump patch version regardless of changes
new_version=$(npm version patch -m "Auto version bump to %s")
echo "Ì¥Ñ New version: $new_version"

# Stage package.json and package-lock.json if exists
git add package.json
if [ -f package-lock.json ]; then
  git add package-lock.json
fi

# Commit version bump
git commit -m "Auto version bump to ${new_version}" || echo "‚ö†Ô∏è No changes to commit"

# Push updated version back to the branch
git push origin "$branch"

echo "‚úÖ Version bump complete!"
