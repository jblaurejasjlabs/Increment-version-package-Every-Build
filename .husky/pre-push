#!/usr/bin/env sh
echo "íº€ Husky Pre-Push: Auto version bump (local)"

branch=$(git rev-parse --abbrev-ref HEAD)
echo "Current branch: $branch"

last_commit_msg=$(git log -1 --pretty=%B)
if echo "$last_commit_msg" | grep -q "^Auto version bu
new_version=$(npm version patch --no-git-tag-version -m "Auto version bump to %s [ci skip]")
echo "í´„ New version: $new_version"

git add package.json
[ -f package-lock.json ] && git add package-lock.json

git diff --cached --quiet || git commit -m "Auto version bump to ${new_version} [ci skip]"
git push origin "$branch"

echo "âœ… Local version bump complete!"
